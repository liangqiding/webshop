<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Electro - HTML Ecommerce Template</title>

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="../main/css/bootstrap.min.css"/>

    <!-- Slick -->
    <link type="text/css" rel="stylesheet" href="../main/css/slick.css"/>
    <link type="text/css" rel="stylesheet" href="../main/css/slick-theme.css"/>

    <!-- nouislider -->
    <link type="text/css" rel="stylesheet" href="../main/css/nouislider.min.css"/>

    <!-- Font Awesome Icon -->
    <link rel="stylesheet" href="../main/css/font-awesome.min.css">

    <!-- Custom stlylesheet -->
    <link type="text/css" rel="stylesheet" href="../main/css/style.css"/>

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../manage/css/bootstrap.min.css">
    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="../manage/css/bootstrap-theme.min.css">
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body>


<!-- HEADER -->
<header id="header_include">
    <!-- TOP HEADER -->
    <div id="top-header">
        <div class="container">
            <ul class="header-links pull-left">
                <li><a href="####"><i class="fa fa-phone"></i> 0758-xxxxxxx</a></li>
                <li><a href="####"><i class="fa fa-envelope-o"></i> email@xxxxx.com</a></li>
                <li><a href="####"><i class="fa fa-map-marker"></i> 广东-东莞</a></li>
            </ul>
            <ul class="header-links pull-right">
                <li><a href="/manage"><i class="fa fa-dollar"></i> 卖家后台</a></li>
                <li><a href="####"><i class="fa fa-dollar"></i> 用户名:{{users.u_name}}</a></li>
                <li><a href="/my"><i class="fa fa-user-o"></i> 我的账号</a></li>
                <li><a href="/logout"><i class="fa fa-user-o"></i> 退出登录</a></li>
            </ul>
        </div>
    </div>
    <!-- /TOP HEADER -->

    <!-- MAIN HEADER -->
    <div id="header">
        <!-- container -->
        <div class="container">
            <!-- row -->
            <div class="row">
                <!-- LOGO -->
                <div class="col-md-3">
                    <div class="header-logo">
                        <a href="####" class="logo">
                            <img src="../main/img/logo.png" alt="">
                        </a>
                    </div>
                </div>
                <!-- /LOGO -->

                <!-- SEARCH BAR -->
                <div class="col-md-6">
                    <div class="header-search">
                        <form>
                            <select class="input-select" id="p_classid">
                                <option value="0">全部</option>
                                <option value="1">电脑</option>
                                <option value="2">手机</option>
                                <option value="3">耳机</option>
                                <option value="4">像机</option>
                                <option value="5">平板电脑</option>
                            </select>
                            <input class="input" id="p_name" placeholder="搜索内容：">
                            <button class="search-btn" v-on:click="Sel()">搜索</button>
                        </form>
                    </div>
                </div>
                <!-- /SEARCH BAR -->

                <!-- 购物车 -->
                <div class="col-md-3 clearfix">
                    <div class="header-ctn">
                        <!-- Wishlist -->
                        <div>
                            <a href="/love">
                                <i class="fa fa-heart-o"></i>
                                <span>喜欢</span>
                                <!--喜欢的数量-->
                                <div class="qty">{{countL}}</div>
                            </a>
                        </div>
                        <!-- /Wishlist -->

                        <!-- 购物车 -->
                        <div class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                <i class="fa fa-shopping-cart"></i>
                                <span>购物车</span>
                                <!--购物车数量-->
                                <div class="qty">{{countC}}</div>
                            </a>
                            <div class="cart-dropdown">
                                <div class="cart-list" >
                                    <div class="product-widget" v-for="c in cartlist">
                                        <div class="product-img">
                                            <img :src="'../images/'+c.cart_img" alt="">
                                        </div>
                                        <div class="product-body">
                                            <h3 class="product-name"><a href="####">{{c.cart_p_name}}</a></h3>
                                            <h4 class="product-price"><span class="qty">{{c.cart_sum}}</span>￥{{c.cart_p_price}}</h4>
                                        </div>
                                    </div>
                                </div>
                                <!--总价-->
                                <div class="cart-summary">
                                </div>
                                <div class="cart-btns">
                                    <a href="/cartout">进入购物车</a>
                                    <a href="####">取消 <i class="fa fa-arrow-circle-right"></i></a>
                                </div>
                            </div>
                        </div>
                        <!-- /Cart -->

                        <!-- Menu Toogle -->
                        <div class="menu-toggle">
                            <a href="####">
                                <i class="fa fa-bars"></i>
                                <span>Menu</span>
                            </a>
                        </div>
                        <!-- /Menu Toogle -->
                    </div>
                </div>
                <!-- /ACCOUNT -->
            </div>
            <!-- row -->
        </div>
        <!-- container -->
    </div>
    <!-- /MAIN HEADER -->
</header>
<!-- /HEADER -->

    <div id="checkout">
        <!-- 导航栏 -->
        <nav id="navigation">
            <!-- container -->
            <div class="container">
                <!-- responsive-nav -->
                <div id="responsive-nav">
                    <!-- NAV -->
                    <ul class="main-nav nav navbar-nav">
                        <li><a href="/">首页</a></li>
                        <li class="active"><a href="/CheckOut">待结算订单</a></li>
                        <li ><a href="/cartout">购物车</a></li>
                        <li><a href="/my">我的</a></li>
                    </ul>
                    <!-- /NAV -->
                </div>
                <!-- /responsive-nav -->
            </div>
            <!-- /container -->
        </nav>
        <!-- /NAVIGATION -->
        <!-- 路径栏 -->
        <div id="breadcrumb" class="section">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="breadcrumb-header">待结算订单</h3>
                        <ul class="breadcrumb-tree">
                            <li><a href="/">首页</a></li>
                            <li class="active">待结算订单</li>
                        </ul>
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /BREADCRUMB -->

    <!-- 地址栏 -->
    <div class="section">
        <!-- container -->
        <div class="container">
            <!-- row -->
            <div class="row">


                <div class="col-md-7">
                    <!-- Billing Details -->
                    <div class="billing-details">
                        <div class="section-title">
                            <h3 class="title">默认地址信息</h3>
                            <br>
                            <br>
                            <div>
                                <p>姓名：{{address.name}}</p>
                                <p>电话：{{address.phone}}</p>
                                <p>地址：{{address.address}}</p>
                            </div>
                        </div>
                        <hr/>
                    </div>
                    <!-- /Billing Details -->

                    <!-- 编辑地址 或添加地址 -->
                    <div class="shiping-details">
                        <div class="section-title">
                            <h3 class="title">编辑地址</h3>
                        </div>
                        <div class="input-checkbox">
                            <input type="checkbox" id="shiping-address">
                            <label for="shiping-address" style="color:#2aabd2 ">
                                <span></span>
                                点击编辑
                            </label>
                            <div class="caption">
                                <div class="form-group">
                                    <span>地址：</span>
                                </div>
                                <div class="form-group">
                                    <input class="input" type="text" id="name" name="name" :placeholder="address.name">
                                </div>
                                <div class="form-group">
                                    <input class="input" type="text" id="phone" name="phone" :placeholder="address.phone">
                                </div>
                                <div class="form-group">
                                    <input class="input" type="text" id="addressA" name="address" :placeholder="address.address">
                                </div>
                                <div class="form-group">
                                    <input v-on:click="saves(address.id)" class="input" type="submit" value="保存" placeholder="保存">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /Shiping Details -->
                    <!-- /Order notes -->
                </div>


                <!-- 待结算订单 -->
                <div class="col-md-5 order-details">
                    <div class="section-title text-center">
                        <h3 class="title">待结算订单</h3>
                    </div>
                    <div class="order-summary">
                        <div class="order-col">
                            <div><strong>名称&nbsp;&nbsp;&nbsp;</strong></div>
                            <div><strong>价格&nbsp;&nbsp;&nbsp;</strong></div>
                            <div><strong>生成日期&nbsp;&nbsp;&nbsp;</strong></div>
                            <div><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数量</strong></div>
                            <div><strong>优惠价</strong></div>
                        </div>
                        <!--							订单列表-->
                        <div class="order-products" v-for="c in cartlist">
                            <!-- /input-group -->

                                <div v-if="c.cart_state=='支付中'" class="order-col" aria-label="a">
                                    <input type="checkbox" checked=＂checked＂ aria-label="a" :id="'ids'+c.cart_id" :onclick="'check('+c.cart_id+')'"/> <div><span style="color: blue">{{c.cart_sum}}x{{c.cart_p_name}}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{c.cart_p_price}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{c.cart_date}}</div>
                                    <div style="color: red">￥{{c.cart_order_price}}</div>
                                </div>
                            <div v-else class="order-col" aria-label="a">
                                <input type="checkbox"  aria-label="a" :id="'ids'+c.cart_id" :onclick="'check('+c.cart_id+')'"/> <div><span style="color: blue">{{c.cart_p_name}}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{c.cart_p_price}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{c.cart_date}}</div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{c.cart_sum}}x
                                <div style="color: red">￥{{c.cart_order_price}}</div>
                            </div>
                            <!-- /input-group -->
                        </div>
                        <!--							订单列表-->

                        <div class="order-col">
                            <div>全选<input type="checkbox" id="alls"/></div>
                            <div><strong>&nbsp;</strong></div>
                        </div>

                        <!--                    计算价格-->
                        <div class="order-col">
                            <div><strong>总价</strong></div>
                            <div><strong class="order-total">￥<span id="sumprice">{{sumPrices}}</span></strong></div>
                        </div>
                    </div>
                    <div class="input-checkbox">
                        <input type="checkbox" id="terms">
                        <label for="terms">
                            <span></span>
                            我已阅读买家协议 <a href="#"> & 买家协议</a>
                        </label>
                        <h5 id="xieyi" style="color: red"></h5>
                    </div>
                    <a onclick="docheck()" href="#" class="primary-btn order-submit">结算</a>
                </div>
                <!-- /Order Details -->
            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /SECTION -->

    <!-- NEWSLETTER -->
    <div id="newsletter" class="section">
        <!-- container -->
        <div class="container">
            <!-- row -->
            <div class="row">
                <div class="col-md-12">
                    <div class="newsletter">
                        <p>Sign Up for the <strong>NEWSLETTER</strong></p>
                        <form>
                            <input class="input" type="email" placeholder="Enter Your Email">
                            <button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
                        </form>
                        <ul class="newsletter-follow">
                            <li>
                                <a href="#"><i class="fa fa-facebook"></i></a>
                            </li>
                            <li>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                            </li>
                            <li>
                                <a href="#"><i class="fa fa-pinterest"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /NEWSLETTER -->

    <!-- 页面尾部2 -->
        <!-- 页面尾部2 -->
        <footer id="footer">
            <!-- top footer -->
            <div class="section">
                <!-- container -->
                <div class="container">
                    <!-- row -->
                    <div class="row">
                        <div class="col-md-3 col-xs-6">
                            <div class="footer">
                                <h3 class="footer-title">关于我们</h3>
                                <p>广东科技学院16软工本科12班27号傅钰潼</p>
                                <ul class="footer-links">
                                    <li><a href="####"><i class="fa fa-map-marker"></i>广东-东莞</a></li>
                                    <li><a href="####"><i class="fa fa-phone"></i>0758-8888-4856</a></li>
                                    <li><a href="####"><i class="fa fa-envelope-o"></i>jjfly666@163.com</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-6">
                            <div class="footer">
                                <h3 class="footer-title">网上商城系统</h3>
                                <ul class="footer-links">
                                    <li><a href="####">基于SSM架构 </a></li>
                                    <li><a href="####"></a>流程简便</li>
                                    <li><a href="####">功能齐全</a></li>
                                    <li><a href="####">web端</a></li>
                                    <li><a href="####">操作简单</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="clearfix visible-xs"></div>

                        <div class="col-md-3 col-xs-6">
                            <div class="footer">
                                <h3 class="footer-title">建议留言</h3>
                                <ul class="footer-links">
                                    <li><a href="####">关于我们</a></li>
                                    <li><a href="####">联系方式</a></li>
                                    <li><a href="####">0758-8888-4856 </a></li>
                                    <li><a href="####">邮箱 jjfly@163.com</a></li>
                                    <li><a href="####">QQ 2368542192</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-6">
                            <div class="footer">
                                <h3 class="footer-title">公告</h3>
                                <ul class="footer-links">
                                    <li><a href="####">优化界面</a></li>
                                    <li><a href="####">修复了相关bug</a></li>
                                    <li><a href="####">感谢广大用户对我们的支持！</a></li>
                                    <li><a href="####"></a>相信我们会做得更好！</li>
                                    <li><a href="####">帮助</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- /row -->
                </div>
                <!-- /container -->
            </div>
            <!-- /top footer -->

            <!-- bottom footer -->
        <div id="bottom-footer" class="section">
            <div class="container">
                <!-- row -->
                <div class="row">
                    <div class="col-md-12 text-center">
                        <ul class="footer-payments">
                            <li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
                            <li><a href="#"><i class="fa fa-credit-card"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
                            <li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
                        </ul>
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /bottom footer -->
    </footer>
</div>
<!-- jQuery Plugins -->
<script src="../main/js/jquery.min.js"></script>
<script src="../main/js/bootstrap.min.js"></script>
<script src="../main/js/slick.min.js"></script>
<script src="../main/js/nouislider.min.js"></script>
<script src="../main/js/jquery.zoom.min.js"></script>
<script src="../main/js/main.js"></script>

<!--引入Vue-->
<script src="../vuejs/axios-0.18.0.js"></script>
<script src="../vuejs/vuejs-2.5.16.js"></script>
<script src="../vuejs/CheckOut.js"></script>
<script src="../vuejs/header.js"></script>
<script type="text/javascript">
    // $(document).ready(function(){
    //     SumPrice();
    // });
    function check(cart_id) {
        if ($(eval("ids" + cart_id)).is(":checked")) {
            SumPrice(cart_id,'支付中','no');
        }else {
            SumPrice(cart_id,'待支付','no');
        }
    }
    //用户协议框 //控制协议没勾选提示
    $("#terms").click(function () {
        if ($("#terms").is(":checked")) {
            $("#xieyi").html("");
        }
    })

<!--    控制全选框-->
    $(function () {
        $("#alls").click(function () {
            if ($("#alls").is(":checked")) {
                $('input[id^="ids"]').prop("checked", true);
                SumPrice(0,'支付中','yes');
            } else {
                $('input[id^="ids"]').prop("checked", false);
                SumPrice(0,'待支付','yes');
            }
        })
    })
    function SumPrice(cart_id,cart_state,all) {
        $.ajax({
            type: 'post',
            url: "/SumPrice",
            data: {"cart_id": cart_id, "cart_state": cart_state,"all":all},
            success: function (data) {
                if (data != null) {
//                结算总价
                    $("#sumprice").html(data)
                }
            },
            error: function (err) {
               console.log(err)
            }
        });
    }
    <!--    结算-->
    function docheck() {
        //terms 用户协议
        if ($("#terms").is(":checked")) {
        } else {
            // alert("请勾选用户协议！")
            $("#xieyi").html("请勾选买家协议");
            return false;
        }
        var sumprice=$("#sumprice").html();
        if (sumprice==''||sumprice<=0){
            alert("请选择要结算的商品！")
            return false;
        }
        $.ajax({
            type: 'post',
            url: "/DoOrder",
            data: {"cart_state": '多个支付中'},
            success: function (data) {
                if (data != null) {
//                结算总价
                    if (data=='success'){
                        alert('结算成功！');
                        window.location.href="/successed";
                    }

                }
            },
            error: function (err) {
                console.log(err)
            }
        });

    }
</script>
</body>
</html>
